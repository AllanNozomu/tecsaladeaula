{% extends "admin-base.html" %}
{% load static %}

{% block js %} {{block.super}}
<script type="text/javascript" src="{% static 'js/courses/app.js' %}"></script>
<script type="text/javascript" src="{% static 'js/courses/filters.js' %}"></script>
<script type="text/javascript" src="{% static 'js/courses/controllers.js' %}"></script>
<script type="text/javascript" src="{% static 'js/courses/factories.js' %}"></script>
{% endblock %}

{% block content %}
<!-- COURSES -->
<section id="courses" class="container" ng-app="courses" ng-controller="CourseListController">
    <!--  HEADER -->
    <header>
        <div class="row">
            <div class="col-lg-6">
                <h1>Cursos</h1>
            </div>
            <div class="col-lg-6 textright">
                <a href="/admin/courses/new" class="btn btn-lg btn-success uppercase">Novo Curso</a>
            </div>
        </div>
    </header>
    <!-- END HEADER -->

    <!-- FILTERS -->
    <div class="filters">
        <!--  FORM INLINE -->
        <div class="form-inline">
            <!-- ROW -->
            <div class="row">
                <!-- COL-LG-6 -->
                <div class="col-lg-5">
                    <div class="checkbox">
                        <label><input ng-model="filters.all" type="checkbox"> Todos</label>
                        <label><input ng-model="filters.published" type="checkbox"> Publicado</label>
                        <label><input ng-model="filters.listed" type="checkbox"> Listado</label>
                        <label><input ng-model="filters.draft" type="checkbox"> Rascunho</label>
                    </div>
                </div>
                <!-- END COL-LG-6 -->
                <!-- COL-LG-3 -->
                <div class="col-lg-3 textright">
                    <input type="text" ng-model="filters.textsearch" placeholder="Palavra-chave" class="form-control"/>
                </div>
                <!-- END COL-LG-3 -->
                <!-- COL-LG-3 -->
                <div class="col-lg-3 textright">
                    <select ng-model="ordering" class="form-control">
                        <option value="id">Ordernar ...</option>
                        <option value="status">Status</option>
                        <option value="publication">Data de publicação</option>
                        <option value="name">Nome do curso</option>
                    </select>
                </div>
                <!-- END COL-LG-3 -->
                <div class="col-lg-1 textcenter">
                    <button class="btn btn-info" ng-class="{active:reverse}" ng-click="reverse=!reverse">Inverter</button>
                </div>
            </div>
            <!-- END ROW -->
        </div>
        <!-- END FORM INLINE -->
    </div>
    <!-- END FILTERS -->

    <!-- ALL COURSES -->
    <section id="all-courses" class="courses-list">

        {% verbatim %}
        <!-- COURSE -->
        <div class="course" ng-repeat="course in (filteredList = (courseList | orderBy:ordering:reverse | filter:filters.check))">
            <div class="row">
                <div class="col-lg-1">
                    <span class="label" ng-class="{
                        'label-default' : !(course.isDraft() || course.isListed() || course.isPublished()),
                        'label-warning': course.isDraft(),
                        'label-info': course.isListed(),
                        'label-success': course.isPublished()}">{{ course.status | capfirst }}</span>
                </div>
                <div class="col-lg-8">
                    <a href="/admin/course/html5">{{ course.name }}</a>
                    <button title="Mostrar lições" alt="Mostrar lições"
                            class="btn pull-right" ng-click="showLessons=!showLessons">
                        <span class="icon"
                              ng-class="{'fa fa-chevron-down':!showLessons,'fa fa-chevron-up':showLessons}">
                        </span>
                    </button>
                </div>
                <div class="col-lg-3 textright" ng-show="course.isPublished()">
                    <span class="date-label">Publicado em</span> <span class="date label label-success">{{ course.publication | date:'MMM, yyyy' }}</span>
                </div>
                <div class="col-lg-3 textright" ng-show="course.publication && !course.isPublished()">
                    <span class="date-label">Publicar em</span> <span class="date label label-info">{{ course.publication | date:'MMM, yyyy' }}</span>
                </div>
                <div class="col-lg-3 textright" ng-show="!course.publication">
                    <span class="date label label-danger">Sem data de publicação</span>
                </div>
            </div>
            <div class="row" ng-show="showLessons">
                <div class="lessons col-lg-11 col-lg-offset-1">
                    <div class="lesson">
                        <div class="row">
                            <div class="col-lg-1">
                                <span class="label label-success">Publicado</span>
                            </div>
                            <div class="col-lg-11">
                                <a href="">1 - Introdução: Internet e Web</a>
                            </div>
                        </div>
                    </div>
                    <div class="lesson">
                        <div class="row">
                            <div class="col-lg-1">
                                <span class="label label-info">Listada</span>
                            </div>
                            <div class="col-lg-11">
                                <a href="">2 - Montando a estrutura de um documento HTML</a>
                            </div>
                        </div>
                    </div>
                    <div class="lesson">
                        <div class="row">
                            <div class="col-lg-1">
                                <span class="label label-warning">Rascunho</span>
                            </div>
                            <div class="col-lg-11">
                                <a href="">3 - Grupos de conteúdo e elementos semânticos de texto</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END COURSE -->

        <div class="row" ng-show="filteredList.length === 0">
            <p class="textcenter">Nenhum curso encontrado</p>
        </div>
        {% endverbatim %}
    </section>
    <!-- END ALL-COURSES -->

</section>
<!-- END COURSES -->


{% endblock %}
