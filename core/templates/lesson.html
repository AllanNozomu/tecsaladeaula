{% extends "base.html" %}

{% load staticfiles %}
{% load timtec_markdown %}

{% block content %}

<script type="text/javascript">
window.lessonId = {{ lesson.pk }};

$(document).ready(function() {
  $(".nav-tabs a").click(function(e) {
    e.preventDefault();
    $(this).tab('show');
  })
  $('a.unit').tooltip();
})
</script>

<script type="text/javascript" src="{% static 'js/lesson.js' %}" charset="utf-8"></script>


<!-- CONTAINER -->
<div id="course-content" ng-app="lesson">

  <!-- HEADER -->
  {% include "_course-header-inline.html"  with course=lesson.course %}
  <!-- END HEADER -->

  <!-- MAIN CONTENT -->
  <section id="main-content" class="container" ng-controller="LessonMainCtrl">

    <!-- LESSON NAVIGATION FOR TABLET AND DESKTOP -->
    <nav class="course-lessons-nav row hidden-xs">
      <div class="col-lg-12 col-sm-12">
        <div class="btn-group button-watching">
          <button type="button" class="btn btn-sm btn-info">{{ lesson.name }}
          </button>
          <button type="button" class="btn btn-sm btn-info dropdown-toggle" data-toggle="dropdown">
            <i class="icon-chevron-down"></i>
          </button>
          <ul class="dropdown-menu">
            {% for list_lesson in lesson.course.public_lessons %}
            <li><a href="{% url 'lesson' list_lesson.slug %}"><span class="title">{{ list_lesson.name }}</span></a></li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </nav>
    <!-- END LESSON NAVIGATION FOR TABLET AND DESKTOP -->

    <!-- LESSON NAVIGATION FOR PHONE -->
    <p class="visible-xs">
        <select onchange="document.location=this.value" class="form-control">
            <option>{{lesson.name}}</option>
            {% for list_lesson in lesson.course.public_lessons %}
                {% if list_lesson.name != lesson.name %}
                    <option value="{% url 'lesson' list_lesson.slug %}">{{ list_lesson.name }}</option>
                {% endif %}
            {% endfor %}
        </select>
    </p>
    <!-- END LESSON NAVIGATION FOR PHONE -->


    <!-- COURSE-VIDEO -->
    <section class="course-video top-xs">
      <!-- lesson_video.html -->
      <div class="row">
        {% verbatim %}
        <!-- UNITS NAVIGATION FOR TABLET AND DESKTOP -->
        <div class="col-lg-1 col-md-1 col-sm-1 hidden-xs">
          <a style="display:block;" data-placement="right"
             title="{{ unit.video.name }}"
             href="#/{{ $index+1 }}" class="has-tooltip unit track" data-toggle="tooltip"
             onclick="return false;"
             ng-repeat="unit in lesson.units"
             ng-class="{watching: isSelected($index+1), done: isDone(unit)}"
             ng-click="select($index+1)">
                <i class="icon-caret-right" ng-if="isSelected($index+1)"></i>
                <span class="position">{{ unit.position + 1 }}</span>
                <i class="icon-list" ng-if="unit.activity !== null"></i>
          </a>
        </div>
        <!-- END UNITS NAVIGATION FOR TABLET AND DESKTOP -->

        <!-- UNITS NAVIGATION FOR PHONES -->
        <div class="col-xs-12 visible-xs">
            <p>
                <select ng-model="currentUnitPos" ng-change="select(currentUnitPos);" class="form-control">
                    <option ng-repeat="unit in lesson.units"
                            ng-value="$index+1"
                            ng-selected="isSelected($index+1)"
                            value="{{$index+1}}">Unidade {{ unit.position + 1 }}</option>
                </select>
            </p>
        </div>
        <!-- END UNITS NAVIGATION FOR PHONES -->
        {% endverbatim %}

        <div ng-view></div>
      </div>
    </section>

    <!-- NOTES -->
    <div class="col-sm-3 col-lg-3" style="height:420px;">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#subtitles" data-toggle="tab">Saiba mais</a></li>
            <li><a href="#notes" data-toggle="tab">Anotações</a></li>
            <li><a href="" data-toggle="tooltip" data-placemente="top" data-original-title="Esconder transcrição/anotações"><i class="icon-double-angle-right"></a></i></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="subtitles">
            </div>
            <div class="tab-pane" id="notes">
                <form class="textright">
                    <textarea rows="5" class="col-lg-12 left right"></textarea>
                    <input type="submit" class="btn btn-success" value="Salvar">
                </form>
                <ol>
                    <a href="">Ver todas as anotações</a>
                    <li>
                        <p>Eu integer? Dolor augue elit velit natoque tristique, ridiculus, mauris rhoncus ac augue. Aliquet a risus, a magna! Mattis, natoque, risus turpis, aliquam magna aenean! Ut amet amet elit dis magna enim penatibus. Pulvinar elementum? Tempor cum dapibus vut lundium.</p>
                        <p>Ac arcu ridiculus! A, tortor porta porta elit tincidunt, tincidunt! Adipiscing pulvinar amet? Placerat odio tempor, enim augue penatibus purus lorem magnis, adipiscing magna. Facilisis dictumst facilisis adipiscing phasellus! Sed in, scelerisque nascetur pellentesque et, urna platea pid integer.</p>
                        <p>Arcu eu, aenean, vel tortor elementum nisi platea dis? Est vut nisi a amet, in, lacus lectus. Mid rhoncus et tristique diam adipiscing magna massa et placerat, adipiscing urna urna scelerisque facilisis etiam penatibus phasellus tincidunt turpis lectus porttitor.</p>
                        <p>Odio urna aliquet ac adipiscing, adipiscing integer! In vel. Phasellus ac, sed vel porta ac sociis eros magna augue? Sed, a, mauris ultrices lundium elementum rhoncus sit eu et! Velit hac, et duis enim! Pulvinar! Augue a duis sociis.</p>
                        <p>Nisi, sed proin in tempor dolor aliquet. Arcu, elementum nunc, eros in odio, integer? Sit ac phasellus a egestas hac ultrices, ac mattis egestas, nunc augue sit adipiscing in, egestas nascetur! Urna arcu placerat aliquet odio vel magna phasellus.</p>
                    </li>
                    <li>
                        <p>Eu integer? Dolor augue elit velit natoque tristique, ridiculus, mauris rhoncus ac augue. Aliquet a risus, a magna! Mattis, natoque, risus turpis, aliquam magna aenean! Ut amet amet elit dis magna enim penatibus. Pulvinar elementum? Tempor cum dapibus vut lundium.</p>
                        <p>Ac arcu ridiculus! A, tortor porta porta elit tincidunt, tincidunt! Adipiscing pulvinar amet? Placerat odio tempor, enim augue penatibus purus lorem magnis, adipiscing magna. Facilisis dictumst facilisis adipiscing phasellus! Sed in, scelerisque nascetur pellentesque et, urna platea pid integer.</p>
                        <p>Arcu eu, aenean, vel tortor elementum nisi platea dis? Est vut nisi a amet, in, lacus lectus. Mid rhoncus et tristique diam adipiscing magna massa et placerat, adipiscing urna urna scelerisque facilisis etiam penatibus phasellus tincidunt turpis lectus porttitor.</p>
                        <p>Odio urna aliquet ac adipiscing, adipiscing integer! In vel. Phasellus ac, sed vel porta ac sociis eros magna augue? Sed, a, mauris ultrices lundium elementum rhoncus sit eu et! Velit hac, et duis enim! Pulvinar! Augue a duis sociis.</p>
                        <p>Nisi, sed proin in tempor dolor aliquet. Arcu, elementum nunc, eros in odio, integer? Sit ac phasellus a egestas hac ultrices, ac mattis egestas, nunc augue sit adipiscing in, egestas nascetur! Urna arcu placerat aliquet odio vel magna phasellus.</p>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <!-- END NOTES -->


    <div class="row hidden-lg">
        <div class="col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1">
            <section class="course-instructions">
              <div class="page-header-double">
                <h3><i class="icon-double-angle-right"></i> Notas do professor</h3>
              </div>
              {{ lesson.notes|timtec_markdown }}
            </section>
        </div>
    </div>

  <!-- END COURSE-VIDEO -->

  <!-- FORUM -->
  <div class="row">
    {% include "_forum_inline.html"  with course=lesson.course %}
    <div class="col-lg-3 hidden-md hidden-sm hidden-xs">
      <section class="course-instructions">
        <div class="page-header-double">
          <h3><i class="icon-double-angle-right"></i> Notas do professor</h3>
        </div>
        {{ lesson.notes|timtec_markdown }}
      </section>

      <section class="course-social" style="position:relative;overflow:hidden;">
      </section>
    </div>
  </div>
  <!-- END FORUM -->

</section>
<!-- END MAIN CONTENT -->
</div>
<!-- CONTAINER -->
{% endblock %}
