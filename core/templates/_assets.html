{% load compressed %}
{% load staticfiles %}

{% compressed_css 'common' %}
{% if admin %}
    {% compressed_css 'admin' %}
{% else %}
    {% compressed_css 'public' %}
{% endif %}
{% compressed_js 'all' %}
{% compressed_js 'codemirror' %}


<script type="text/javascript" src="{% static 'js/vendor/pagedown/Markdown.Converter.js' %}" charset="utf-8"></script>
<script type="text/javascript" src="{% static 'js/vendor/pagedown/Markdown.Editor.js' %}" charset="utf-8"></script>
<script type="text/javascript" src="{% static 'js/vendor/pagedown/Markdown.Sanitizer.js' %}" charset="utf-8"></script>

<script>
(function(angular){
    'use strict';

    window.STATIC_URL = '{{ STATIC_URL }}';
    window.MEDIA_URL = '{{ MEDIA_URL }}';
    window.DEBUG = '{{ DEBUG }}';

    var app = angular.module('django', []);

    app.constant('STATIC_URL', window.STATIC_URL);
    app.constant('MEDIA_URL', window.MEDIA_URL);
    app.constant('DEBUG', window.DEBUG);
    app.config(
        function ($httpProvider, $logProvider, DEBUG, $sceDelegateProvider, STATIC_URL) {
            $httpProvider.defaults.xsrfCookieName = 'csrftoken';
            $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
            $logProvider.debugEnabled(DEBUG);
            $sceDelegateProvider.resourceUrlWhitelist([
                /^https?:\/\/(www\.)?youtube\.com\/.*/,
                'data:text/html, <html style="background: white">',
                'self',
                STATIC_URL + '**'
            ]);
        }
    );
})(angular);
</script>
